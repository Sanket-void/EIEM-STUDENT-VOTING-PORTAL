<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EIEM Student Voting Portal — PRESIDENT</title>

<style>
:root {
  --accent:#2563eb;
  --accent-light:#3b82f6;
  --surface:rgba(255,255,255,0.07);
  --glass:rgba(255,255,255,0.12);
  --border:rgba(255,255,255,0.15);
  --text:#f9fafb;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:"Segoe UI",Roboto,system-ui;}
body{
  min-height:100vh;
  background:url("https://uploads.onecompiler.io/4437haxep/4436y2x5e/1000286408.jpg") center/cover no-repeat fixed;
  color:var(--text);
  display:flex;
  flex-direction:column;
  align-items:center;
}
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.55);
  backdrop-filter:blur(6px);
  z-index:0;
}

/* --- HEADER --- */
header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 10;
  height: 95px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 6%;
  background: linear-gradient(90deg, rgba(13, 22, 45, 0.9) 0%, rgba(8, 19, 40, 0.8) 100%);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.35);
}

/* Left Logo */
header .left img {
  height: 68px;
  width: auto;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.12);
  padding: 4px;
}

/* Center Title */
header .center {
  text-align: center;
  flex: 1;
  color: #f9fafb;
}

header .center h2 {
  font-size: 22px;
  letter-spacing: 0.8px;
  font-weight: 700;
  margin: 0;
}

header .center .subtitle {
  font-size: 13px;
  opacity: 0.85;
  margin-top: 2px;
  font-style: italic;
}

/* Right Section */
header .right {
  display: flex;
  align-items: center;
  gap: 18px;
}

/* Larger user photo */
header .user-photo {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid rgba(255, 255, 255, 0.3);
  background: rgba(255, 255, 255, 0.15);
  flex-shrink: 0;
}

header .user-photo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* User info alignment */
header .user-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  gap: 4px;
}

header .user-info span {
  font-weight: 600;
  letter-spacing: 0.5px;
  color: #e2e8f0;
  font-size: 15.5px;
  line-height: 1.2;
}

header .user-info button {
  background: linear-gradient(to right, #2563eb, #1e40af);
  border: none;
  color: white;
  font-weight: 600;
  border-radius: 6px;
  padding: 7px 18px;
  cursor: pointer;
  font-size: 13.5px;
  transition: background 0.25s, transform 0.25s;
  align-self: flex-start;
}

header .user-info button:hover {
  background: linear-gradient(to right, #1e40af, #1d4ed8);
  transform: translateY(-2px);
}

/* Adjust page content margin for fixed header */
main {
  margin-top: 120px;
}

/* Responsive adjustments */
@media (max-width: 600px) {
  header {
    flex-direction: column;
    align-items: center;
    height: auto;
    padding: 12px;
  }

  header .right {
    flex-direction: column;
    align-items: center;
  }

  header .user-info {
    align-items: center;
  }

  header .user-photo {
    width: 55px;
    height: 55px;
  }

  main {
    margin-top: 160px;
  }
}

/* --- CONTENT --- */
main{
  position:relative;z-index:1;width:90%;max-width:980px;
  background:var(--surface);backdrop-filter:blur(14px);border:1px solid var(--border);
  border-radius:20px;box-shadow:0 8px 40px rgba(0,0,0,0.45);
  padding:40px 32px 50px;animation:fadein .6s ease;
}
@keyframes fadein{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
h1{text-align:center;font-size:26px;letter-spacing:1px;margin-bottom:25px;font-weight:700;}
.candidates{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:26px;}
.card{
  background:var(--glass);border:1px solid var(--border);border-radius:16px;
  padding:20px;text-align:center;transition:all .3s;cursor:pointer;
}
.card:hover{transform:translateY(-5px);border-color:var(--accent);}
.card.selected{border-color:var(--accent);box-shadow:0 0 25px rgba(37,99,235,0.45);}
.card img{width:120px;height:120px;object-fit:cover;border-radius:50%;
  border:3px solid rgba(255,255,255,0.2);margin-bottom:10px;}
.card strong{display:block;font-size:17px;margin-bottom:4px;}
.card small{font-size:14px;opacity:.85;}
.vote-btn{
  display:block;
  background:var(--accent);color:#fff;border:none;border-radius:30px;
  padding:13px 45px;font-size:17px;font-weight:600;cursor:pointer;transition:all .3s;
}
.vote-btn:hover{background:var(--accent-light);transform:translateY(-3px);}
/* Modal */
.modal{position:fixed;inset:0;display:none;background:rgba(0,0,0,0.7);
  backdrop-filter:blur(6px);justify-content:center;align-items:center;z-index:99;}
.modal-content{
  background:var(--surface);border:1px solid var(--border);padding:30px 25px;
  border-radius:16px;width:320px;text-align:center;animation:fadein .4s ease;
}
.modal-content img{width:100px;height:100px;border-radius:50%;object-fit:cover;
  margin-bottom:15px;border:2px solid var(--accent);}
.modal-content h3{font-size:20px;margin-bottom:8px;}
.modal-content p{font-size:15px;margin-bottom:20px;opacity:.9;}
.modal-content button{margin:0 5px;padding:10px 22px;border:none;border-radius:6px;
  font-weight:600;cursor:pointer;}
.modal-content .confirm{background:var(--accent);color:#fff;}
.modal-content .close{background:rgba(255,255,255,0.15);color:#fff;}
.modal-content button:hover{filter:brightness(1.2);}
.buttons-container {
  width: 100%;
  height: auto;
  border: rebeccapurple;
  display: flex;
  align-items: center;
  justify-content: end;
  gap: 10px;
  margin-top: 20px;
}

.vote-btn-not {
  outline: none;
  border: 2px solid white;
  background-color: transparent;
  color: #fff;
  font-weight: 600;
  font-size: medium;
  padding:13px 45px;
  height: fit-content;
  border-radius: 20px;
  transition: all .2s ease-in;
  cursor: pointer;
}

.vote-btn-not:hover {
  background-color: #fff;
  color: #000;
}
</style>
</head>

<body>
<header>
  <div class="left"><img src="logo.jpg" alt="EIEM Logo"></div>
  <div class="center">
    <h2>EIEM Student Voting Portal</h2>
    <p class="subtitle">Empowering fair and transparent student elections</p>
  </div>
  <div class="right">
    <div class="user-photo"><img id="profilePic" src="" alt="Profile Photo"></div>
    <div class="user-info">
      <span id="username"></span>
      <button id="logoutBtn">Logout</button>
    </div>
  </div>
</header>

<main>
  <h1>Vote for PRESIDENT</h1>
  <div class="candidates" id="candidateGrid"></div>
  <div class="buttons-container">
    <button class="vote-btn-not" id="not-voteBtn">Not vote</button>
    <button class="vote-btn" id="voteBtn">Submit Vote</button>
  </div>
</main>

<div class="modal" id="modal">
  <div class="modal-content" id="modal-content">
    <img id="modalImg" src="">
    <h3 id="modalCandidate"></h3>
    <p>Voter: <span id="modalVoter"></span></p>
    <button class="confirm" id="confirmBtn">Confirm Vote</button>
    <button class="close" id="closeBtn">Cancel</button>
  </div>
</div>

<script>
// --- Login check and user info ---
const loggedUser = localStorage.getItem("loggedInUser");
if (!loggedUser) {
  alert("Please login first!");
  window.location.href = "login.html";
}
document.getElementById("username").textContent = loggedUser;

// load saved profile photo from localStorage
const savedPhoto = localStorage.getItem("userPhoto");
document.getElementById("profilePic").src =
  savedPhoto || "https://cdn-icons-png.flaticon.com/512/3135/3135715.png";

// logout button
document.getElementById("logoutBtn").addEventListener("click",logout);

 function logout() {
 localStorage.removeItem("loggedInUser");
  localStorage.removeItem("userPhoto");
  window.location.href = "index.html";
}



// --- Candidate list ---
const candidates = [
  { name: "Dilip Ghosh", house: "Orange House", img: "https://uploads.onecompiler.io/4437haxep/443jcuhtp/images%20(1).jpg" },
  { name: "Kunal Ghosh", house: "Green House", img: "https://uploads.onecompiler.io/4437haxep/443jcuhtp/green.jpg" },
  { name: "Shatarup Ghosh", house: "Red House", img: "https://uploads.onecompiler.io/4437haxep/443jcuhtp/Jana-Sena-Logo.jpg" }
];

const grid = document.getElementById("candidateGrid");
let selected = null;

candidates.forEach((c, i) => {
  const card = document.createElement("div");
  card.className = "card";
  card.innerHTML = `<img src="${c.img}" alt="${c.name}">
    <strong>${c.name}</strong><small>${c.house}</small>`;
  card.onclick = () => selectCandidate(i, card);
  grid.appendChild(card);
});

function selectCandidate(i, card) {
  document.querySelectorAll(".card").forEach(el => el.classList.remove("selected"));
  card.classList.add("selected");
  selected = candidates[i];
}

// --- Vote confirmation modal ---
const modal = document.getElementById("modal");
const modalImg = document.getElementById("modalImg");
const modalCandidate = document.getElementById("modalCandidate");
const modalVoter = document.getElementById("modalVoter");
const notVoteBtn = document.getElementById("not-voteBtn");
const modalContent = document.getElementById("modal-content");
const mainmodalContent = modalContent.innerHTML;
notVoteBtn.addEventListener("click", () => {
  const modelContant = modal.innerHTML;
  modal.style.display = "flex";
  modalContent.innerHTML = `<div>
    ${loggedUser} you do not vote to anyone
        <button id="logoutBtn" onclick="logout()">Logout</button>
    </div>`;
});

document.getElementById("voteBtn").onclick = () => {
  if (!selected) return alert("Please select a candidate first!");
  modal.style.display = "flex";
  modalImg.src = selected.img;
  modalCandidate.textContent = selected.name;
  modalVoter.textContent = loggedUser;
};

document.getElementById("closeBtn").onclick = () => (modal.style.display = "none");
document.getElementById("confirmBtn").onclick = () => {
  alert(`✅ ${loggedUser}, your vote for ${selected.name} has been recorded.`);
  localStorage.removeItem("loggedInUser");
  localStorage.removeItem("userPhoto");
  window.location.href = "index.html";
};
modal.onclick = e => { if (e.target === modal){
   modal.style.display = "none";
   modalContent.innerHTML = mainmodalContent;
} };
</script>
</body>
</html>
